<div class="layout-container">
  <mat-toolbar color="primary" class="app-toolbar shadow-sm">
    <div class="container d-flex align-items-center py-2">
      <div class="d-flex align-items-center gap-2">
        <mat-icon>check_circle_outline</mat-icon>
        <span class="fw-bold">Mis Tareas</span>
      </div>

      <span class="spacer"></span>

      <div class="date-display d-none d-md-block me-3">
        <span class="fw-medium">{{ today | date : "fullDate" }}</span>
      </div>

      @if (user$ | async; as user) {
      <button mat-icon-button [matMenuTriggerFor]="userMenu" class="avatar-btn">
        @if (user.photoURL) {
        <img [src]="user.photoURL" class="user-avatar" alt="Avatar" />
        } @else {
        <div class="default-avatar">
          {{ user.email?.charAt(0) | uppercase }}
        </div>
        }
      </button>

      <mat-menu
        #userMenu="matMenu"
        xPosition="before"
        class="custom-menu rounded-3 shadow"
      >
        <div class="user-info-container px-3 py-2">
          <p class="mb-0 fw-bold text-dark">
            {{ user.displayName || "Usuario" }}
          </p>
          <p class="mb-0 text-muted small">{{ user.email }}</p>
        </div>

        <mat-divider></mat-divider>

        <button mat-menu-item (click)="logout()" class="text-danger">
          <mat-icon color="warn">logout</mat-icon>
          <span>Cerrar Sesi√≥n</span>
        </button>
      </mat-menu>
      }
    </div>
  </mat-toolbar>

  <div class="content-wrapper d-flex justify-content-center">
    <div class="container">
      <router-outlet></router-outlet>
    </div>
  </div>
</div>
