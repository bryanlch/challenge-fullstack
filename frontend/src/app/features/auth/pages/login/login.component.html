<div class="d-flex justify-content-center align-items-center vh-100 bg-light">
  <mat-card class="p-4 rounded-4 shadow" style="width: 100%; max-width: 400px">
    <mat-card-header class="mb-3">
      <mat-card-title>Bienvenido</mat-card-title>
      <mat-card-subtitle>Challenge To-Do</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      @if (loading()) {
      <div class="d-flex justify-content-center my-4">
        <mat-spinner diameter="40"></mat-spinner>
      </div>
      } @else { @if (step() === 'email') {
      <form [formGroup]="emailForm" (ngSubmit)="checkUser()">
        <mat-form-field appearance="outline" class="w-100 reounded-3">
          <mat-label>Correo Electr칩nico</mat-label>
          <input
            matInput
            formControlName="email"
            placeholder="ejemplo@correo.com"
          />
          <mat-error>Correo inv치lido</mat-error>
        </mat-form-field>

        <button
          mat-flat-button
          color="primary"
          class="w-100 mt-2 rounded-3"
          [disabled]="emailForm.invalid"
        >
          Continuar
        </button>
      </form>
      } @if (step() === 'password') {
      <div class="mb-3 text-center">
        <p class="text-muted mb-1">Hola, {{ emailForm.value.email }}</p>
        <button mat-button color="primary" class="small-btn" (click)="goBack()">
          Cambiar correo
        </button>
      </div>

      <form [formGroup]="passwordForm" (ngSubmit)="login()">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Contrase침a</mat-label>
          <input matInput type="password" formControlName="password" />
        </mat-form-field>

        <button
          mat-flat-button
          color="primary"
          class="w-100 mt-2"
          [disabled]="passwordForm.invalid"
        >
          Iniciar Sesi칩n
        </button>
      </form>
      } }
    </mat-card-content>
  </mat-card>
</div>
